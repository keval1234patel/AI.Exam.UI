<ng-container *ngIf="questions && questions.length > 0">

  <mat-card class="h-100" style="max-height: 80vh; overflow: hidden;">
    
    <!-- Header -->
    <mat-card-header>
      <mat-card-title>Questions</mat-card-title>
      <mat-card-subtitle>{{ questions.length }} Total</mat-card-subtitle>
    </mat-card-header>

    <mat-divider></mat-divider>

    <!-- List -->
    <mat-card-content class="p-0" style="height: calc(80vh - 80px); overflow-y: auto;">

      <mat-list>

        <mat-list-item
          *ngFor="let q of questions; let i = index"
          (click)="onSelect(q.id)"
          class="mb-1 rounded"
          style="cursor: pointer;"
          [ngClass]="selectedId === q.id ? 'bg-light border-start border-primary' : ''"
        >
          <div class="d-flex w-100">

            <!-- Correct / Wrong Icon -->
            <mat-icon
              class="me-3"
              [ngClass]="isCorrect(q) ? 'text-success' : 'text-danger'"
            >
              {{ isCorrect(q) ? 'check_circle' : 'cancel' }}
            </mat-icon>

            <!-- Question Text -->
            <div class="flex-grow-1">

              <div class="d-flex justify-content-between">
                <span 
                  class="fw-semibold"
                  [ngClass]="selectedId === q.id ? 'text-primary' : ''"
                >
                  Q{{ i + 1 }}: {{ q.questionType }}
                </span>
              </div>

              <small class="text-muted d-block text-truncate">
                {{ q.q }}
              </small>

            </div>

            <!-- Selected Indicator -->
            <div *ngIf="selectedId === q.id" class="ms-2 mt-2">
              <span class="badge bg-primary">&nbsp;</span>
            </div>

          </div>

        <mat-divider *ngIf="i < questions.length - 1"></mat-divider>
        </mat-list-item>
      </mat-list>

    </mat-card-content>
  </mat-card>

</ng-container>
